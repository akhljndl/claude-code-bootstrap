<!-- Generated by claude-code-bootstrap -->
# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working across all projects.

## Projects

All projects live in `~/dev/`. Each project has its own CLAUDE.md with project-specific details.

## Code is Law

The codebase is the source of truth. Documentation exists to make the code navigable — not to replace reading it.

**The parity rule:** When you change code that affects architecture, build commands, conventions, or critical patterns, update the docs that describe those things in the same changeset. Not later. Not in a follow-up. Now.

This applies to: CLAUDE.md files, `docs/` directories, rules files, and any config referenced in documentation.

<!-- {{DOC_UPDATER_ENFORCEMENT}}
  - auto: "**Enforcement:** After any task that modifies structure or conventions, verify docs match reality. This is not optional for structural changes."
  - manual: "**Enforcement:** After structural changes, check whether docs need updating."
-->
{{DOC_UPDATER_ENFORCEMENT}}

---

## Workflow

### Default Task Lifecycle

<!-- {{LIFECYCLE_SKIP_CLAUSE}}
  - strict: Remove the "Skip steps" sentence entirely.
  - guidelines: "For non-trivial tasks, follow this flow by default. Skip steps only when the task is genuinely simple (single-file fix, obvious change)."
  - loose: Replace entire block below with "No enforced workflow. Use your judgment on when to plan, review, or document."
-->
{{LIFECYCLE_SKIP_CLAUSE}}

```
1. PLAN     → Propose your approach and what parallel work is possible. Wait for approval.
2. IMPLEMENT → Execute the plan. Use TDD when adding behavior.
3. REVIEW    → Auto-review code for quality and bugs. Check security only when touching auth, APIs, input handling, or secrets.
4. DOCUMENT  → If the task changed architecture, build commands, conventions, or file structure, update docs in the same changeset.
```

<!-- {{LIFECYCLE_GATE}}
  - strict: "**Gate:** Every step requires completion before proceeding."
  - guidelines: "**Gate:** Step 1 requires user approval. Steps 2-4 run autonomously after that."
  - loose: (remove this line)
-->
{{LIFECYCLE_GATE}}

### Post-Work Behaviors

<!-- {{POST_WORK_BEHAVIORS}}
  Adjust based on AGENT_FLOW and POST_WORK_AGENTS:
  - proactive: All behaviors are "Auto — runs without asking"
  - confirm-first: Auto table uses defaults below, Confirm table uses defaults below
  - always-confirm: All behaviors require confirmation

  Default (confirm-first):
-->

These happen automatically after implementation — no need to ask:

| Behavior | When | How |
|----------|------|-----|
| **Code review** | After any code changes | Review for quality, bugs, style. Flag issues by severity. |
| **Security check** | Only when touching auth, APIs, secrets, credentials, input handling | Check for injection, leaked secrets, missing validation. |
| **Doc update** | After structural or convention changes | Update CLAUDE.md, docs/, and any config docs that reference changed code. |
| **Dead code cleanup** | After refactoring | Remove unused imports, variables, and functions that the refactor orphaned. |
| **Build fix** | When build fails | Analyze errors and fix incrementally. |

These require confirmation before starting:

| Behavior | When |
|----------|------|
| **Planning** | Non-trivial features, multi-file changes, architectural decisions |
| **TDD** | New features, bug fixes that change behavior |
| **E2E testing** | Critical user flows |

**Use specialized agents when available** (e.g., via [everything-claude-code](https://github.com/affaan-m/everything-claude-code)). When agents are independent, launch them in parallel.

### Working Docs (Parallel Coordination)

When parallel work is happening, use `docs/working-docs/` as a shared scratchpad.

**Convention:**
- File naming: `{topic}-{type}.md` (e.g., `auth-research.md`, `api-design-decisions.md`)
- Types: `research`, `decisions`, `plan`, `findings`, `analysis`
- Write findings here so parallel work can read them
- Before starting work, check `docs/working-docs/` for relevant context

<!-- {{WORKING_DOCS_LIFECYCLE}}
  - ephemeral: "**Lifecycle:** Delete all working docs after task completion."
  - persistent: "**Lifecycle:** Keep all working docs indefinitely for future reference."
  - selective: (use the block below as-is)
-->
{{WORKING_DOCS_LIFECYCLE}}

### Hooks

PostToolUse hooks run automatically on every file edit. Don't fight them — if a hook reformats your code, don't undo it.

<!-- {{HOOKS_SUMMARY}}
  - List active hooks per detected language. Only list languages that have hooks configured.
  - Do NOT hardcode specific tool names. Describe what the hooks do.
  - Example:
    - **Python:** Auto-format and lint on save, print() warnings
    - **Go:** Auto-format with import management, static analysis
    - **TypeScript/JS:** Auto-format, type checking, console.log warnings
-->
{{HOOKS_SUMMARY}}

---

## Behavioral Guidelines

### Think Before Coding
- State assumptions explicitly. If uncertain, ask.
- If multiple approaches exist, present them — don't pick silently.
- If a simpler approach exists, say so. Push back when warranted.
<!-- {{THINK_BEFORE_CODING_EXTRA}}
  - too passive: "- Take initiative. Propose solutions proactively. Don't wait to be asked."
  - too verbose: "- Be extremely concise. No preamble, no filler."
  - too aggressive: "- Make minimal changes. Ask before expanding scope."
  - missing workflow: (no addition)
-->
{{THINK_BEFORE_CODING_EXTRA}}

### Simplicity First
- Reference existing components and use them first. Deduplicate.
- No abstractions for single-use code.
- No speculative "flexibility" or "configurability."
- If you have an extension or feature suggestion, propose it — don't implement without approval.
- If you write 200 lines and it could be 50, rewrite it.
<!-- {{SIMPLICITY_EXTRA}}
  - too aggressive: "- When in doubt, change less. Scope creep is the enemy."
  - others: (no addition)
-->
{{SIMPLICITY_EXTRA}}

### Surgical Changes
- Don't "improve" adjacent code, comments, or formatting.
- Match existing style, even if you'd do it differently.
- Every changed line should trace directly to the request.
- Remove imports/variables that YOUR changes made unused. Don't remove pre-existing dead code unless asked.

### Goal-Driven Execution
Transform tasks into verifiable goals:
- "Fix the bug" → reproduce it, then fix it
- "Add feature" → define what done looks like, then build it

For multi-step tasks, use TaskCreate to track progress.

### Orientation
When starting work on a project, check these locations if they exist:
- `docs/` — architecture, conventions, design docs
- `CLAUDE.md` — project-specific instructions
- `docs/working-docs/` — active research from other agents
- `tests/` — existing test patterns
