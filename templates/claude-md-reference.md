<!-- Generated by claude-code-bootstrap -->
# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working across all projects.

## Projects

All projects live in `~/dev/`. Each project has its own CLAUDE.md with project-specific details.

## Code is Law

The codebase is the source of truth. Documentation exists to make the code navigable — not to replace reading it.

**The parity rule:** When you change code that affects architecture, build commands, conventions, or critical patterns, update the docs that describe those things in the same changeset. Not later. Not in a follow-up. Now.

This applies to: CLAUDE.md files, `docs/` directories, rules files, and any config referenced in documentation.

<!-- {{DOC_UPDATER_ENFORCEMENT}}
  - auto: "**Enforcement:** After any task that modifies structure or conventions, run the `doc-updater` agent to verify docs match reality. This is not optional for structural changes."
  - manual: "**Enforcement:** Run the `doc-updater` agent when you think docs need updating."
-->
{{DOC_UPDATER_ENFORCEMENT}}

---

## Workflow

### Default Task Lifecycle

<!-- {{LIFECYCLE_SKIP_CLAUSE}}
  - strict: Remove the "Skip steps" sentence entirely.
  - guidelines: "For non-trivial tasks, follow this flow by default. Skip steps only when the task is genuinely simple (single-file fix, obvious change)."
  - loose: Replace entire block below with "No enforced workflow. Use your judgment on when to plan, review, or document."
-->
{{LIFECYCLE_SKIP_CLAUSE}}

```
1. PLAN     → Propose which agents to use and the approach. Wait for approval.
2. IMPLEMENT → Execute the plan. Use TDD when adding behavior.
3. REVIEW    → Auto-run code-reviewer (always) and security-reviewer (when touching auth, input handling, APIs, secrets).
4. DOCUMENT  → Auto-run doc-updater if the task changed architecture, build commands, conventions, or file structure.
```

<!-- {{LIFECYCLE_GATE}}
  - strict: "**Gate:** Every step requires completion before proceeding."
  - guidelines: "**Gate:** Step 1 requires user approval. Steps 2-4 run autonomously after that."
  - loose: (remove this line)
-->
{{LIFECYCLE_GATE}}

### Working Docs (Parallel Agent Coordination)

When multiple agents work in parallel, they need a shared scratchpad. Use `docs/working-docs/` for this.

**Convention:**
- File naming: `{topic}-{type}.md` (e.g., `auth-research.md`, `api-design-decisions.md`, `caching-plan.md`)
- Types: `research`, `decisions`, `plan`, `findings`, `analysis`
- Agents WRITE their findings here so other agents can READ them
- Before starting work, agents should check `docs/working-docs/` for relevant context from sibling agents

<!-- {{WORKING_DOCS_LIFECYCLE}}
  - ephemeral: "**Lifecycle:** Delete all working docs after task completion."
  - persistent: "**Lifecycle:** Keep all working docs indefinitely for future reference."
  - selective: (use the block below as-is)
-->
{{WORKING_DOCS_LIFECYCLE}}

### Agent Usage

<!-- {{AGENT_TABLE}}
  - If ECC detected: Use full agent table with source noted as "everything-claude-code plugin".
  - If ECC not detected: Add note "Agents listed below are available when the everything-claude-code plugin is installed."
  - Adjust Auto/Confirm column based on AGENT_FLOW:
    - proactive: All agents set to "Auto"
    - confirm-first: Use the defaults shown below
    - always-confirm: All agents set to "Confirm"
-->
{{AGENT_TABLE}}

**Parallel execution:** When agents are independent (e.g., security review + code review), launch them in parallel. Never run sequentially what can run concurrently.

### Hooks

PostToolUse hooks are active and will run automatically:
<!-- {{HOOKS_SUMMARY}}
  - List active hooks per detected language
  - Note source: "(via ECC plugin)" or "(via settings.json)"
  - Example:
    - **TypeScript/JS:** Prettier formatting, `tsc` type checking, `console.log` warnings (via ECC plugin)
    - **Python:** `ruff format` + `ruff check --fix`, `print()` warnings (via settings.json)
    - **Go:** `goimports` formatting, `go vet` static analysis (via settings.json)
-->
{{HOOKS_SUMMARY}}

Don't fight the hooks. If a hook reformats your code, don't undo it.

---

## Behavioral Guidelines

### Think Before Coding
- State assumptions explicitly. If uncertain, ask.
- If multiple approaches exist, present them — don't pick silently.
- If a simpler approach exists, say so. Push back when warranted.
<!-- {{THINK_BEFORE_CODING_EXTRA}}
  - too passive: "- Take initiative. Propose solutions proactively. Don't wait to be asked."
  - too verbose: "- Be extremely concise. No preamble, no filler."
  - too aggressive: "- Make minimal changes. Ask before expanding scope."
  - missing workflow: (no addition)
-->
{{THINK_BEFORE_CODING_EXTRA}}

### Simplicity First
- Reference existing components and use them first. Deduplicate.
- No abstractions for single-use code.
- No speculative "flexibility" or "configurability."
- If you have an extension or feature suggestion, propose it — don't implement without approval.
- If you write 200 lines and it could be 50, rewrite it.
<!-- {{SIMPLICITY_EXTRA}}
  - too aggressive: "- When in doubt, change less. Scope creep is the enemy."
  - others: (no addition)
-->
{{SIMPLICITY_EXTRA}}

### Surgical Changes
- Don't "improve" adjacent code, comments, or formatting.
- Match existing style, even if you'd do it differently.
- Every changed line should trace directly to the request.
- Remove imports/variables that YOUR changes made unused. Don't remove pre-existing dead code unless asked.

### Goal-Driven Execution
Transform tasks into verifiable goals:
- "Fix the bug" → reproduce it, then fix it
- "Add feature" → define what done looks like, then build it

For multi-step tasks, use TaskCreate to track progress.

### Orientation
When starting work on a project, check these locations if they exist:
- `docs/` — architecture, conventions, design docs
- `CLAUDE.md` — project-specific instructions
- `docs/working-docs/` — active research from other agents
- `tests/` — existing test patterns
